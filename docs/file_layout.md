# File System Layout

## Current

```
ROOT/
    _archive/
        ...
    compiled/
        {RESOLUTION}/
            {MODEL_NAME}/
                {YEAR}.vrt
                {GROUP_KEY}_{YEAR/TIME_POINT}.vrt
    features/
        {RESOLUTION}/
            {BLOCK_KEY}/
                {FEATURE_NAME}_{YEAR/TIME_POINT}.tif
            modeling_frame.parquet
            modeling_frame_info.yaml
    figure_results/
        {RUN_DATE}/
            {OUT_RESOLUTION}/
                {YEAR/TIME_POINT}.tif
    input_qc/
        census_summary.pdf
    itu/
        inputs/
            rasters/
                {ISO3}.tif
            shapes/
                ...
        results/
            {RESOLUTION}/
                {MODEL_NAME}/
                    {ISO3}.tif
    logs/
        {PIPELINE_STEP}/
            {RUN_TIMESTAMP}/
                output/
                    ...
                error/
                    ...
    models/
        {RESOLUTION}/
            {MODEL_NAME}/
                lightning_logs/
                    version_{VERSION}/
                        checkpoints/
                            epoch={EPOCH}-step={STEP}.ckpt
                        hparams.yaml
                        metrics.csv
                specification.json
    raking/
        utility_data/
            {RESOLUTION_WITHOUT_M}/
                {MODEL_NAME}/
                    raking_factors_{YEAR/TIME_POINT}.parquet
            raking_shapes.parquet
            raking_population.parquet
        predictions/
            {RESOLUTION}/
                {MODEL_NAME}/
                    {BLOCK_KEY}_{YEAR/TIME_POINT}.tif
    results/
        {RUN_DATE}/
            {OUT_RESOLUTION}/
                {YEAR/TIME_POINT}.tif
        current/
    predictions/
        {RESOLUTION}/
            {MODEL_NAME}/
                {BLOCK_KEY}_{YEAR/TIME_POINT}.tif
    training_data/
        admin/
            {ISO3}_{YEAR}.parquet
        tiles/
            {RESOLUTION}/
                {TILE_KEY}/
                    {MEASURE}.tif
                    people_per_structure.parquet
                    pixel_area_weights.parquet
            {TILE_KEY}/
                {MEASURE}.tif
                people_per_structure.parquet
                pixel_area_weights.parquet
            people_per_structure.parquet
            pixel_area_weights.parquet
```
## Target

```
ROOT/
    .archive/
        ...
    admin-inputs/
        census/
            {ISO3}_{YEAR}.parquet
            summary.parquet
        itu_masks/
            {ISO3}.tif
        raking/
            {RAKING_KEY}_population.parquet
            {RAKING_KEY}_shapes.parquet
    modeling/
        {RESOLUTION}/
            modeling_frame.parquet
            modeling_frame_info.yaml
            features/
                {TIME_POINT}/
                    {BLOCK_KEY}/
                        {FEATURE_NAME}.tif
            models/
                {RUN_DATE}/
                    lightning_logs/
                        version_0/
                            checkpoints/
                                epoch={EPOCH}-step={STEP}.ckpt
                            hparams.yaml
                            metrics.csv
                    specification.json
                    model.ckpt # symlink to checkpoint
                    raw_predictions/
                        {TIME_POINT}/
                            {BLOCK_KEY}.tif
                    raking_factors/
                        {TIME_POINT}.parquet
                    raked_predictions/
                        {TIME_POINT}/
                            {BLOCK_KEY}.tif
                    compiled/
                        {TIME_POINT}/
                            {GROUP_KEY}.tif
                            index.vrt
            training_data/
                people_per_structure.parquet
                pixel_area_weights.parquet
                tiles/
                    {TILE_KEY}/
                        {MEASURE}.tif
                        people_per_structure.parquet
                        pixel_area_weights.parquet
    results/
        {RUN_DATE}/
            {OUT_RESOLUTION}/
                {YEAR/TIME_POINT}.tif
        current/
